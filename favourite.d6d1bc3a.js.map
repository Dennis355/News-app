{"mappings":"gfAAAA,EAAA,SACA,IAAMC,EAAe,gBAEJC,SAASC,cAAc,mBAC/BC,iBAAiB,SAsBgB,SAAdC,GAC1B,IAAMC,EAASD,EAAEE,OAAOC,QAAQ,4BAChC,IAAKF,EAAQ,OAGUA,EAAhBG,UAAUC,OAAO,mBAExB,IAAIC,EAAsBC,EAAKX,IAAiB,GAC1CY,EAAOP,EAAOE,QAAQ,oBAEtBM,EAAKD,EAAKE,aAAa,MACvBC,EAAWH,EAAKV,cAAc,mBAAmBY,aAAa,OAC9DE,EAAUJ,EAAKV,cAAc,wBAAwBe,YACrDC,EAAQN,EAAKV,cAAc,qBAAqBe,YAChDE,EAAWP,EAAKV,cAAc,2BAA2Be,YACzDG,EAAiBR,EAAKV,cAAc,oBAAoBe,YACxDI,EAAMT,EAAKV,cAAc,yBAAyBY,aAAa,QAG/DQ,EAAe,CACnBT,KACAE,WACAC,UACAE,QACAC,WACAC,iBACAC,OAGyBX,EAAoBa,MAC7C,SAAAC,G,OAAQF,EAAaT,KAAOA,C,MAK5BH,EAAoBe,KAAK,CAACH,IAC1BI,EAAK1B,EAAcU,IAIL,GAAZL,EAAOG,UAAUmB,SAAS,mBAAoB,CAChDtB,EAAOY,YAAc,kBACrB,IAAMW,EAAsBlB,EAAoBmB,QAC9C,SAAAC,G,OAAQR,EAAaT,KAAOA,C,IAE9Ba,EAAK1B,EAAc4B,GAGdvB,EAAOG,UAAUmB,SAAS,qBAC7BtB,EAAOY,YAAc,uBACrBS,EAAK1B,EAAc,CAACsB,I,KArET,IAAXI,EAAO,SAACK,EAAKC,GACjB,IACE,IAAMC,EAAkBC,KAAKC,UAAUH,GACvCI,aAAaC,QAAQN,EAAKE,E,CAC1B,MAAOK,GACPC,QAAQD,MAAM,oBAAqBA,EAAME,Q,GAIvC7B,EAAO,SAAAoB,GACX,IACE,IAAME,EAAkBG,aAAaK,QAAQV,GAC7C,OAA2B,OAApBE,OAA2BS,EAAYR,KAAKS,MAAMV,E,CACzD,MAAOK,GACPC,QAAQD,MAAMA,EAAME,Q","sources":["src/js/favourite.js"],"sourcesContent":["import './header';\nconst KEY_FAV_NEWS = 'favorite-news';\n\nconst newsList = document.querySelector('news-card__list');\nnewsList.addEventListener('click', onFavoriteBtnClick);\n\n// функції для роботи з local storage\nconst save = (key, value) => {\n  try {\n    const serializedState = JSON.stringify(value);\n    localStorage.setItem(key, serializedState);\n  } catch (error) {\n    console.error('Set state error: ', error.message);\n  }\n};\n\nconst load = key => {\n  try {\n    const serializedState = localStorage.getItem(key);\n    return serializedState === null ? undefined : JSON.parse(serializedState);\n  } catch (error) {\n    console.error(error.message);\n  }\n};\n\n// додавання та видалення новин до storage по кліку на кнопку\nfunction onFavoriteBtnClick(e) {\n  const favBtn = e.target.closest('.news-card__btn-favorite');\n  if (!favBtn) return;\n\n  // перемикає додатковий клас\n  favBtn.classList.toggle('remove-from-fav');\n\n  let currentStorageState = load(KEY_FAV_NEWS) || [];\n  const card = favBtn.closest('.news-card__item');\n\n  const id = card.getAttribute('id');\n  const urlMedia = card.querySelector('.news-card__img').getAttribute('src');\n  const section = card.querySelector('.news-card__category').textContent;\n  const title = card.querySelector('.news-card__title').textContent;\n  const abstract = card.querySelector('.news-card__description').textContent;\n  const published_date = card.querySelector('.news-card__date').textContent;\n  const url = card.querySelector('.news-card__read-more').getAttribute('href');\n\n  // об'єкт, що зберігається у сховищі\n  const selectedNews = {\n    id,\n    urlMedia,\n    section,\n    title,\n    abstract,\n    published_date,\n    url,\n  };\n\n  const isAlreadyInStorage = currentStorageState.some(\n    news => selectedNews.id === id\n  );\n\n  // перевірка чи є у сховищі\n  if (!isAlreadyInStorage) {\n    currentStorageState.push([selectedNews]);\n    save(KEY_FAV_NEWS, currentStorageState);\n  }\n\n  // видалає зі сховища\n  if (favBtn.classList.contains('remove-from-fav')) {\n    favBtn.textContent = 'Add to favorite';\n    const updatedStorageState = currentStorageState.filter(\n      item => selectedNews.id !== id\n    );\n    save(KEY_FAV_NEWS, updatedStorageState);\n\n    // додає до сховища\n    if (!favBtn.classList.contains('remove-from-fav')) {\n      favBtn.textContent = 'Remove from favorite';\n      save(KEY_FAV_NEWS, [selectedNews]);\n    }\n  }\n}\n\n// рендер карток\nfunction renderFavorites() {\n  const favoritesContainer = document.querySelector('.favorites-list');\n\n  favoritesContainer.innerHTML = '';\n\n  const favorites = load(KEY_FAV_NEWS);\n\n  for (const favorite of favorites) {\n    const card = createNewsCard(favorite);\n    favoritesContainer.appendChild(card);\n  }\n}\n\n// написати функцію createNewsCard\n"],"names":["parcelRequire","$47799112dc97d416$var$KEY_FAV_NEWS","document","querySelector","addEventListener","e","favBtn","target","closest","classList","toggle","currentStorageState","$47799112dc97d416$var$load","card","id","getAttribute","urlMedia","section","textContent","title","abstract","published_date","url","selectedNews","some","news","push","$47799112dc97d416$var$save","contains","updatedStorageState","filter","item","key","value","serializedState","JSON","stringify","localStorage","setItem","error","console","message","getItem","undefined","parse"],"version":3,"file":"favourite.d6d1bc3a.js.map"}